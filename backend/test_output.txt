============================= test session starts =============================
platform win32 -- Python 3.14.0, pytest-9.0.2, pluggy-1.6.0 -- C:\Python314\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\Confidential\Documents\screener\tvscreener\backend\tests
configfile: pytest.ini
plugins: anyio-4.12.0, langsmith-0.7.1, asyncio-1.3.0, timeout-2.4.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 418 items

tests\test_auth.py::TestJWTHandler::test_create_access_token PASSED      [  0%]
tests\test_auth.py::TestJWTHandler::test_create_refresh_token PASSED     [  0%]
tests\test_auth.py::TestJWTHandler::test_verify_valid_access_token PASSED [  0%]
tests\test_auth.py::TestJWTHandler::test_verify_valid_refresh_token PASSED [  0%]
tests\test_auth.py::TestJWTHandler::test_verify_wrong_type_fails PASSED  [  1%]
tests\test_auth.py::TestJWTHandler::test_verify_invalid_token PASSED     [  1%]
tests\test_auth.py::TestJWTHandler::test_verify_wrong_secret PASSED      [  1%]
tests\test_auth.py::TestAuthModels::test_register_request_valid PASSED   [  1%]
tests\test_auth.py::TestAuthModels::test_register_request_short_password PASSED [  2%]
tests\test_auth.py::TestAuthModels::test_login_request_valid PASSED      [  2%]
tests\test_auth.py::TestAuthModels::test_token_response PASSED           [  2%]
tests\test_auth.py::TestAuthModels::test_user_response PASSED            [  2%]
tests\test_auth.py::TestAuthModels::test_update_profile_request_valid PASSED [  3%]
tests\test_auth.py::TestAuthModels::test_update_profile_request_none PASSED [  3%]
tests\test_auth.py::TestAuthModels::test_change_password_request_valid PASSED [  3%]
tests\test_auth.py::TestAuthModels::test_change_password_request_short PASSED [  3%]
tests\test_core_routes.py::TestHealthRoute::test_health_returns_200 PASSED [  4%]
tests\test_core_routes.py::TestHealthRoute::test_health_response_structure PASSED [  4%]
tests\test_core_routes.py::TestHealthRoute::test_health_services_present PASSED [  4%]
tests\test_core_routes.py::TestLinksRoutes::test_get_all_links PASSED    [  4%]
tests\test_core_routes.py::TestLinksRoutes::test_filter_links_by_category PASSED [  5%]
tests\test_core_routes.py::TestLinksRoutes::test_filter_empty_category PASSED [  5%]
tests\test_core_routes.py::TestLinksRoutes::test_ticker_links PASSED     [  5%]
tests\test_core_routes.py::TestLinksRoutes::test_ticker_links_case_insensitive PASSED [  5%]
tests\test_phase1.py::TestHealthEndpoint::test_health_returns_200 PASSED [  5%]
tests\test_phase1.py::TestHealthEndpoint::test_health_response_model PASSED [  6%]
tests\test_phase1.py::TestPydanticModels::test_stock_quote_creation PASSED [  6%]
tests\test_phase1.py::TestPydanticModels::test_ohlcv_creation PASSED     [  6%]
tests\test_phase1.py::TestPydanticModels::test_fear_greed_validation PASSED [  6%]
tests\test_phase1.py::TestPydanticModels::test_fear_greed_out_of_range PASSED [  7%]
tests\test_phase1.py::TestPydanticModels::test_timeframe_enum PASSED     [  7%]
tests\test_phase1.py::TestPydanticModels::test_signal_strength_enum PASSED [  7%]
tests\test_phase1.py::TestPydanticModels::test_breakout_stage_enum PASSED [  7%]
tests\test_phase1.py::TestPydanticModels::test_options_chain_empty PASSED [  8%]
tests\test_phase1.py::TestPydanticModels::test_option_contract PASSED    [  8%]
tests\test_phase1.py::TestYFinanceClient::test_get_stock_data PASSED     [  8%]
tests\test_phase1.py::TestYFinanceClient::test_get_options_chain PASSED  [  8%]
tests\test_phase1.py::TestStockEndpoint::test_get_stock PASSED           [  9%]
tests\test_phase1.py::TestStockEndpoint::test_invalid_ticker PASSED      [  9%]
tests\test_phase10.py::TestRetryDecorator::test_import PASSED            [  9%]
tests\test_phase10.py::TestRetryDecorator::test_no_retry_on_success PASSED [  9%]
tests\test_phase10.py::TestRetryDecorator::test_retry_on_connection_error PASSED [ 10%]
tests\test_phase10.py::TestRetryDecorator::test_retry_exhaustion_raises PASSED [ 10%]
tests\test_phase10.py::TestRetryDecorator::test_no_retry_on_non_retryable_error PASSED [ 10%]
tests\test_phase10.py::TestRetryDecorator::test_async_retry PASSED       [ 10%]
tests\test_phase10.py::TestRetryDecorator::test_custom_retryable_exceptions PASSED [ 11%]
tests\test_phase10.py::TestRetryDecorator::test_on_retry_callback PASSED [ 11%]
tests\test_phase10.py::TestRetryDecorator::test_backoff_delay_computation PASSED [ 11%]
tests\test_phase10.py::TestRetryDecorator::test_max_delay_cap PASSED     [ 11%]
tests\test_phase10.py::TestSecurityHeaders::test_x_content_type_options PASSED [ 11%]
tests\test_phase10.py::TestSecurityHeaders::test_x_frame_options PASSED  [ 12%]
tests\test_phase10.py::TestSecurityHeaders::test_x_xss_protection PASSED [ 12%]
tests\test_phase10.py::TestSecurityHeaders::test_referrer_policy PASSED  [ 12%]
tests\test_phase10.py::TestSecurityHeaders::test_permissions_policy PASSED [ 12%]
tests\test_phase10.py::TestSecurityHeaders::test_no_hsts_in_dev PASSED   [ 13%]
tests\test_phase10.py::TestConfigurableCORS::test_cors_origin_list_default PASSED [ 13%]
tests\test_phase10.py::TestConfigurableCORS::test_cors_origin_list_custom PASSED [ 13%]
tests\test_phase10.py::TestConfigurableCORS::test_cors_origin_list_empty_filtered PASSED [ 13%]
tests\test_phase10.py::TestOpenAPIMetadata::test_contact_info PASSED     [ 14%]
tests\test_phase10.py::TestOpenAPIMetadata::test_license_info PASSED     [ 14%]
tests\test_phase10.py::TestOpenAPIMetadata::test_tag_descriptions PASSED [ 14%]
tests\test_phase10.py::TestOpenAPIMetadata::test_all_tags_have_descriptions PASSED [ 14%]
tests\test_phase11.py::TestStructlogMigration::test_main_no_print_statements PASSED [ 15%]
tests\test_phase11.py::TestStructlogMigration::test_edgar_no_print_statements PASSED [ 15%]
tests\test_phase11.py::TestStartupValidation::test_validate_config_function_exists PASSED [ 15%]
tests\test_phase11.py::TestStartupValidation::test_validate_config_warns_on_empty_keys PASSED [ 15%]
tests\test_phase11.py::TestStartupValidation::test_app_start_time_defined PASSED [ 16%]
tests\test_phase11.py::TestEnhancedHealthCheck::test_health_returns_200 PASSED [ 16%]
tests\test_phase11.py::TestEnhancedHealthCheck::test_health_has_status_field PASSED [ 16%]
tests\test_phase11.py::TestEnhancedHealthCheck::test_health_has_uptime PASSED [ 16%]
tests\test_phase11.py::TestEnhancedHealthCheck::test_health_has_version PASSED [ 16%]
tests\test_phase11.py::TestEnhancedHealthCheck::test_health_has_services PASSED [ 17%]
tests\test_phase11.py::TestEnhancedHealthCheck::test_health_services_have_status PASSED [ 17%]
tests\test_phase11.py::TestEnhancedHealthCheck::test_health_latency_fields PASSED [ 17%]
tests\test_phase11.py::TestMetrics::test_metrics_module_imports PASSED   [ 17%]
tests\test_phase11.py::TestMetrics::test_metrics_endpoint_returns_text PASSED [ 18%]
tests\test_phase11.py::TestMetrics::test_metrics_contains_counter_type PASSED [ 18%]
tests\test_phase11.py::TestMetrics::test_metrics_contains_duration_type PASSED [ 18%]
tests\test_phase11.py::TestMetrics::test_metrics_records_requests PASSED [ 18%]
tests\test_phase11.py::TestMetrics::test_bucket_path_normalization PASSED [ 19%]
tests\test_phase11.py::TestMetrics::test_bucket_path_preserves_static PASSED [ 19%]
tests\test_phase11.py::TestMetrics::test_record_request_function PASSED  [ 19%]
tests\test_phase12.py::TestCircuitBreakerStates::test_import PASSED      [ 19%]
tests\test_phase12.py::TestCircuitBreakerStates::test_starts_closed PASSED [ 20%]
tests\test_phase12.py::TestCircuitBreakerStates::test_stays_closed_on_success PASSED [ 20%]
tests\test_phase12.py::TestCircuitBreakerStates::test_opens_after_threshold_failures PASSED [ 20%]
tests\test_phase12.py::TestCircuitBreakerStates::test_open_circuit_raises_circuit_open_error PASSED [ 20%]
tests\test_phase12.py::TestCircuitBreakerStates::test_half_open_after_recovery_timeout PASSED [ 21%]
tests\test_phase12.py::TestCircuitBreakerStates::test_half_open_success_closes PASSED [ 21%]
tests\test_phase12.py::TestCircuitBreakerStates::test_half_open_failure_reopens PASSED [ 21%]
tests\test_phase12.py::TestCircuitBreakerStates::test_reset PASSED       [ 21%]
tests\test_phase12.py::TestCircuitBreakerStates::test_success_resets_failure_count PASSED [ 22%]
tests\test_phase12.py::TestCircuitBreakerRegistry::test_get_breaker_returns_same_instance PASSED [ 22%]
tests\test_phase12.py::TestCircuitBreakerRegistry::test_get_breaker_different_services PASSED [ 22%]
tests\test_phase12.py::TestCircuitBreakerRegistry::test_get_all_breaker_states PASSED [ 22%]
tests\test_phase12.py::TestDataEngineSafeCall::test_safe_call_exists PASSED [ 22%]
tests\test_phase12.py::TestDataEngineSafeCall::test_safe_call_passes_through PASSED [ 23%]
tests\test_phase12.py::TestDataEngineSafeCall::test_safe_call_returns_fallback_on_open_circuit PASSED [ 23%]
tests\test_phase12.py::TestDataEngineSafeCall::test_breakers_initialized PASSED [ 23%]
tests\test_phase12.py::TestGZipCompression::test_gzip_middleware_registered PASSED [ 23%]
tests\test_phase12.py::TestGZipCompression::test_health_response_is_valid_json_with_gzip PASSED [ 24%]
tests\test_phase12.py::TestGZipCompression::test_accepts_gzip_encoding PASSED [ 24%]
tests\test_phase13.py::TestAPIVersioning::test_v1_prefix_on_stock PASSED [ 24%]
tests\test_phase13.py::TestAPIVersioning::test_v1_prefix_on_options PASSED [ 24%]
tests\test_phase13.py::TestAPIVersioning::test_v1_prefix_on_chat PASSED  [ 25%]
tests\test_phase13.py::TestAPIVersioning::test_v1_prefix_on_watchlist PASSED [ 25%]
tests\test_phase13.py::TestAPIVersioning::test_v1_prefix_on_alerts PASSED [ 25%]
tests\test_phase13.py::TestAPIVersioning::test_v1_prefix_on_sentiment PASSED [ 25%]
tests\test_phase13.py::TestAPIVersioning::test_v1_prefix_on_tv PASSED    [ 26%]
tests\test_phase13.py::TestAPIVersioning::test_health_not_versioned PASSED [ 26%]
tests\test_phase13.py::TestAPIVersioning::test_metrics_not_versioned PASSED [ 26%]
tests\test_phase13.py::TestAPIVersioning::test_websocket_not_versioned PASSED [ 26%]
tests\test_phase13.py::TestAPIVersioning::test_stock_accessible_via_v1 PASSED [ 27%]
tests\test_phase13.py::TestAPIVersioning::test_old_api_path_returns_404 PASSED [ 27%]
tests\test_phase13.py::TestAPIVersionHeader::test_version_header_on_health PASSED [ 27%]
tests\test_phase13.py::TestAPIVersionHeader::test_version_header_on_metrics PASSED [ 27%]
tests\test_phase13.py::TestAPIVersionHeader::test_version_header_on_data_endpoint PASSED [ 27%]
tests\test_phase13.py::TestPaginatedResponse::test_model_import PASSED   [ 28%]
tests\test_phase13.py::TestPaginatedResponse::test_default_values PASSED [ 28%]
tests\test_phase13.py::TestPaginatedResponse::test_with_data PASSED      [ 28%]
tests\test_phase13.py::TestPaginatedResponse::test_validation_page_must_be_positive PASSED [ 28%]
tests\test_phase13.py::TestPaginatedResponse::test_validation_per_page_max PASSED [ 29%]
tests\test_phase13.py::TestPaginatedResponse::test_serialization PASSED  [ 29%]
tests\test_phase13.py::TestMetricsPathBucketingV1::test_bucket_v1_stock PASSED [ 29%]
tests\test_phase13.py::TestMetricsPathBucketingV1::test_bucket_v1_options PASSED [ 29%]
tests\test_phase13.py::TestMetricsPathBucketingV1::test_bucket_v1_news PASSED [ 30%]
tests\test_phase13.py::TestMetricsPathBucketingV1::test_bucket_health_unchanged PASSED [ 30%]
tests\test_phase13.py::TestMetricsPathBucketingV1::test_bucket_metrics_unchanged PASSED [ 30%]
tests\test_phase14.py::TestWebSocketAuth::test_ws_authenticate_function_exists PASSED [ 30%]
tests\test_phase14.py::TestWebSocketAuth::test_price_stream_accepts_api_key_param PASSED [ 31%]
tests\test_phase14.py::TestWebSocketAuth::test_alert_stream_accepts_api_key_param PASSED [ 31%]
tests\test_phase14.py::TestWebSocketAuth::test_dev_mode_bypasses_auth PASSED [ 31%]
tests\test_phase14.py::TestWebSocketAuth::test_dev_mode_price_stream PASSED [ 31%]
tests\test_phase14.py::TestWebSocketAuth::test_connection_manager_import PASSED [ 32%]
tests\test_phase14.py::TestWebSocketAuth::test_connection_manager_tracks_connections PASSED [ 32%]
tests\test_phase14.py::TestAuditMiddleware::test_audit_middleware_registered PASSED [ 32%]
tests\test_phase14.py::TestAuditMiddleware::test_audit_records_requests PASSED [ 32%]
tests\test_phase14.py::TestAuditMiddleware::test_audit_skips_health PASSED [ 33%]
tests\test_phase14.py::TestAuditMiddleware::test_audit_skips_metrics PASSED [ 33%]
tests\test_phase14.py::TestAuditMiddleware::test_audit_ring_buffer_max PASSED [ 33%]
tests\test_phase14.py::TestAuditLogEndpoint::test_audit_log_route_exists PASSED [ 33%]
tests\test_phase14.py::TestAuditLogEndpoint::test_audit_log_returns_json PASSED [ 33%]
tests\test_phase14.py::TestAuditLogEndpoint::test_audit_log_limit_param PASSED [ 34%]
tests\test_phase14.py::TestAuditLogEndpoint::test_audit_log_path_filter PASSED [ 34%]
tests\test_phase14.py::TestAuditLogEndpoint::test_audit_log_method_filter PASSED [ 34%]
tests\test_phase15.py::TestTickerValidation::test_valid_tickers PASSED   [ 34%]
tests\test_phase15.py::TestTickerValidation::test_invalid_tickers PASSED [ 35%]
tests\test_phase15.py::TestTickerValidation::test_sanitize_ticker_normalizes PASSED [ 35%]
tests\test_phase15.py::TestTickerValidation::test_sanitize_ticker_rejects_invalid PASSED [ 35%]
tests\test_phase15.py::TestXSSPrevention::test_detects_script_tags PASSED [ 35%]
tests\test_phase15.py::TestXSSPrevention::test_detects_javascript_proto PASSED [ 36%]
tests\test_phase15.py::TestXSSPrevention::test_detects_event_handlers PASSED [ 36%]
tests\test_phase15.py::TestXSSPrevention::test_detects_iframe PASSED     [ 36%]
tests\test_phase15.py::TestXSSPrevention::test_safe_text_passes PASSED   [ 36%]
tests\test_phase15.py::TestXSSPrevention::test_sanitize_string_rejects_xss PASSED [ 37%]
tests\test_phase15.py::TestXSSPrevention::test_sanitize_string_truncates PASSED [ 37%]
tests\test_phase15.py::TestXSSPrevention::test_sanitize_string_strips PASSED [ 37%]
tests\test_phase15.py::TestPathTraversal::test_detects_dot_dot PASSED    [ 37%]
tests\test_phase15.py::TestPathTraversal::test_detects_backslash PASSED  [ 38%]
tests\test_phase15.py::TestPathTraversal::test_detects_encoded PASSED    [ 38%]
tests\test_phase15.py::TestPathTraversal::test_safe_ticker_passes PASSED [ 38%]
tests\test_phase15.py::TestRequestSize::test_valid_size PASSED           [ 38%]
tests\test_phase15.py::TestRequestSize::test_oversized_rejected PASSED   [ 38%]
tests\test_phase15.py::TestRequestSize::test_none_allowed PASSED         [ 39%]
tests\test_phase15.py::TestRequestSize::test_max_constant PASSED         [ 39%]
tests\test_phase15.py::TestCacheIntegration::test_redis_cache_decorator_exists PASSED [ 39%]
tests\test_phase15.py::TestCacheIntegration::test_cache_miss_returns_data PASSED [ 39%]
tests\test_phase15.py::TestCacheIntegration::test_repeated_calls_consistent PASSED [ 40%]
tests\test_phase15.py::TestCircuitBreakerIntegration::test_breaker_starts_closed PASSED [ 40%]
tests\test_phase15.py::TestCircuitBreakerIntegration::test_breaker_opens_and_recovers PASSED [ 40%]
tests\test_phase15.py::TestCircuitBreakerIntegration::test_data_engine_has_safe_call PASSED [ 40%]
tests\test_phase15.py::TestEndpointComposition::test_all_responses_have_version_header PASSED [ 41%]
tests\test_phase15.py::TestEndpointComposition::test_middleware_stack_order PASSED [ 41%]
tests\test_phase15.py::TestEndpointComposition::test_error_response_format PASSED [ 41%]
tests\test_phase15.py::TestEndpointComposition::test_unversioned_endpoints_still_work PASSED [ 41%]
tests\test_phase16.py::TestSwaggerUI::test_docs_endpoint_accessible PASSED [ 42%]
tests\test_phase16.py::TestSwaggerUI::test_redoc_endpoint_accessible PASSED [ 42%]
tests\test_phase16.py::TestSwaggerUI::test_openapi_json_accessible PASSED [ 42%]
tests\test_phase16.py::TestSwaggerUI::test_api_version_is_1_0_0 PASSED   [ 42%]
tests\test_phase16.py::TestSwaggerUI::test_description_contains_features PASSED [ 43%]
tests\test_phase16.py::TestSwaggerUI::test_contact_info_present PASSED   [ 43%]
tests\test_phase16.py::TestSwaggerUI::test_license_info_present PASSED   [ 43%]
tests\test_phase16.py::TestSwaggerUI::test_swagger_ui_parameters PASSED  [ 43%]
tests\test_phase16.py::TestOpenAPITags::test_all_tags_present PASSED     [ 44%]
tests\test_phase16.py::TestOpenAPITags::test_tags_have_descriptions PASSED [ 44%]
tests\test_phase16.py::TestLoadTestConfig::test_locustfile_exists PASSED [ 44%]
tests\test_phase16.py::TestLoadTestConfig::test_locustfile_has_user_class PASSED [ 44%]
tests\test_phase16.py::TestLoadTestConfig::test_locustfile_has_tasks PASSED [ 44%]
tests\test_phase2.py::TestTAEngine::test_import PASSED                   [ 45%]
tests\test_phase2.py::TestTAEngine::test_sma PASSED                      [ 45%]
tests\test_phase2.py::TestTAEngine::test_ema PASSED                      [ 45%]
tests\test_phase2.py::TestTAEngine::test_rsi PASSED                      [ 45%]
tests\test_phase2.py::TestTAEngine::test_compute_indicators PASSED       [ 46%]
tests\test_phase2.py::TestTAEngine::test_detect_support_resistance PASSED [ 46%]
tests\test_phase2.py::TestOptionsEngine::test_import PASSED              [ 46%]
tests\test_phase2.py::TestOptionsEngine::test_black_scholes_call PASSED  [ 46%]
tests\test_phase2.py::TestOptionsEngine::test_black_scholes_put PASSED   [ 47%]
tests\test_phase2.py::TestOptionsEngine::test_greeks PASSED              [ 47%]
tests\test_phase2.py::TestOptionsEngine::test_put_call_parity PASSED     [ 47%]
tests\test_phase2.py::TestOptionsEngine::test_implied_volatility PASSED  [ 47%]
tests\test_phase2.py::TestRiskEngine::test_import PASSED                 [ 48%]
tests\test_phase2.py::TestRiskEngine::test_position_sizing PASSED        [ 48%]
tests\test_phase2.py::TestRiskEngine::test_position_sizing_tight_stop PASSED [ 48%]
tests\test_phase2.py::TestRiskEngine::test_kelly_criterion PASSED        [ 48%]
tests\test_phase2.py::TestRiskEngine::test_trade_score PASSED            [ 49%]
tests\test_phase2.py::TestBreakoutEngine::test_import PASSED             [ 49%]
tests\test_phase2.py::TestChartEngine::test_import PASSED                [ 49%]
tests\test_phase2.py::TestChartEngine::test_quick_chart PASSED           [ 49%]
tests\test_phase2.py::TestChartEngine::test_full_analysis_chart PASSED   [ 50%]
tests\test_phase2.py::TestChartEngine::test_empty_chart PASSED           [ 50%]
tests\test_phase2.py::TestChartEngine::test_gex_chart PASSED             [ 50%]
tests\test_phase2.py::TestGuardrails::test_message_validation_normal PASSED [ 50%]
tests\test_phase2.py::TestGuardrails::test_message_validation_empty PASSED [ 50%]
tests\test_phase2.py::TestGuardrails::test_message_truncation PASSED     [ 51%]
tests\test_phase2.py::TestGuardrails::test_injection_detection PASSED    [ 51%]
tests\test_phase2.py::TestGuardrails::test_ticker_normalization PASSED   [ 51%]
tests\test_phase2.py::TestGuardrails::test_ticker_extraction PASSED      [ 51%]
tests\test_phase2.py::TestGuardrails::test_output_validation_normal PASSED [ 52%]
tests\test_phase2.py::TestGuardrails::test_output_validation_forbidden_phrases PASSED [ 52%]
tests\test_phase2.py::TestGuardrails::test_output_disclaimer_appended PASSED [ 52%]
tests\test_phase2.py::TestGuardrails::test_pii_detection PASSED          [ 52%]
tests\test_phase2.py::TestGuardrails::test_pii_redaction PASSED          [ 53%]
tests\test_phase2.py::TestGuardrails::test_analysis_score_validation PASSED [ 53%]
tests\test_phase2.py::TestGuardrails::test_analysis_score_bounds PASSED  [ 53%]
tests\test_phase2.py::TestGuardrails::test_agent_output_contract PASSED  [ 53%]
tests\test_phase2.py::TestMemorySystem::test_session_memory_fallback PASSED [ 54%]
tests\test_phase2.py::TestMemorySystem::test_session_memory_context PASSED [ 54%]
tests\test_phase2.py::TestMemorySystem::test_semantic_memory PASSED      [ 54%]
tests\test_phase2.py::TestMemorySystem::test_semantic_search PASSED      [ 54%]
tests\test_phase2.py::TestMemorySystem::test_semantic_forget PASSED      [ 55%]
tests\test_phase2.py::TestMemorySystem::test_semantic_user_profile PASSED [ 55%]
tests\test_phase2.py::TestMemorySystem::test_working_memory PASSED       [ 55%]
tests\test_phase2.py::TestMemorySystem::test_memory_manager PASSED       [ 55%]
tests\test_phase2.py::TestObservability::test_tracing_disabled_by_default PASSED [ 55%]
tests\test_phase2.py::TestObservability::test_trace_span_noop PASSED     [ 56%]
tests\test_phase2.py::TestObservability::test_traced_decorator PASSED    [ 56%]
tests\test_phase2.py::TestObservability::test_agent_metrics PASSED       [ 56%]
tests\test_phase2.py::TestSupervisor::test_graph_builds_without_credentials PASSED [ 56%]
tests\test_phase2.py::TestSupervisor::test_graph_has_all_nodes PASSED    [ 57%]
tests\test_phase2.py::TestSupervisor::test_tools_import PASSED           [ 57%]
tests\test_phase2.py::TestSupervisor::test_prompts_loaded PASSED         [ 57%]
tests\test_phase2.py::TestPipelineGuardrails::test_input_pipeline PASSED [ 57%]
tests\test_phase2.py::TestPipelineGuardrails::test_output_pipeline PASSED [ 58%]
tests\test_phase2.py::TestPipelineGuardrails::test_input_pii_redaction PASSED [ 58%]
tests\test_phase3.py::TestQuickLinks::test_get_all_links PASSED          [ 58%]
tests\test_phase3.py::TestQuickLinks::test_filter_by_category PASSED     [ 58%]
tests\test_phase3.py::TestQuickLinks::test_get_link_for_ticker PASSED    [ 59%]
tests\test_phase3.py::TestQuickLinks::test_get_link_unknown_service PASSED [ 59%]
tests\test_phase3.py::TestLinksEndpoints::test_get_links PASSED          [ 59%]
tests\test_phase3.py::TestLinksEndpoints::test_get_links_filter PASSED   [ 59%]
tests\test_phase3.py::TestLinksEndpoints::test_get_ticker_links PASSED   [ 60%]
tests\test_phase3.py::TestAlpacaClientConfig::test_client_creation PASSED [ 60%]
tests\test_phase3.py::TestAlpacaClientConfig::test_is_configured_property PASSED [ 60%]
tests\test_phase3.py::TestAlpacaStockSnapshot::test_stock_snapshot SKIPPED [ 60%]
tests\test_phase3.py::TestAlpacaStockSnapshot::test_multi_snapshots SKIPPED [ 61%]
tests\test_phase3.py::TestAlpacaStockSnapshot::test_latest_trade SKIPPED [ 61%]
tests\test_phase3.py::TestAlpacaNews::test_get_news_general SKIPPED      [ 61%]
tests\test_phase3.py::TestAlpacaNews::test_get_news_filtered SKIPPED     [ 61%]
tests\test_phase3.py::TestAlpacaScreener::test_most_actives_volume SKIPPED [ 61%]
tests\test_phase3.py::TestAlpacaScreener::test_most_actives_trades SKIPPED [ 62%]
tests\test_phase3.py::TestAlpacaAccount::test_get_account SKIPPED (A...) [ 62%]
tests\test_phase3.py::TestAlpacaAccount::test_get_positions SKIPPED      [ 62%]
tests\test_phase3.py::TestAlpacaOptions::test_options_snapshot SKIPPED   [ 62%]
tests\test_phase3.py::TestAlpacaOptions::test_options_chain_filtered SKIPPED [ 63%]
tests\test_phase3.py::TestAlpacaApiEndpoints::test_snapshot_endpoint PASSED [ 63%]
tests\test_phase3.py::TestAlpacaApiEndpoints::test_snapshots_endpoint PASSED [ 63%]
tests\test_phase3.py::TestAlpacaApiEndpoints::test_news_endpoint PASSED  [ 63%]
tests\test_phase3.py::TestAlpacaApiEndpoints::test_most_actives_endpoint PASSED [ 64%]
tests\test_phase3.py::TestAlpacaApiEndpoints::test_account_endpoint PASSED [ 64%]
tests\test_phase3.py::TestAlpacaApiEndpoints::test_positions_endpoint PASSED [ 64%]
tests\test_phase3.py::TestAlpacaApiEndpoints::test_live_options_endpoint PASSED [ 64%]
tests\test_phase3.py::TestTradingViewClient::test_technical_summary PASSED [ 65%]
tests\test_phase3.py::TestTradingViewClient::test_screen_stocks PASSED   [ 65%]
tests\test_phase3.py::TestTradingViewClient::test_top_movers PASSED      [ 65%]
tests\test_phase3.py::TestExtendedDataEndpoints::test_financials_endpoint PASSED [ 65%]
tests\test_phase3.py::TestExtendedDataEndpoints::test_earnings_calendar_endpoint PASSED [ 66%]
tests\test_phase3.py::TestExtendedDataEndpoints::test_analyst_endpoint PASSED [ 66%]
tests\test_phase3.py::TestExtendedDataEndpoints::test_insider_endpoint PASSED [ 66%]
tests\test_phase3.py::TestExtendedDataEndpoints::test_darkpool_endpoint PASSED [ 66%]
tests\test_phase5.py::TestFormatters::test_format_currency_positive PASSED [ 66%]
tests\test_phase5.py::TestFormatters::test_format_currency_negative PASSED [ 67%]
tests\test_phase5.py::TestFormatters::test_format_currency_zero PASSED   [ 67%]
tests\test_phase5.py::TestFormatters::test_format_pct_positive PASSED    [ 67%]
tests\test_phase5.py::TestFormatters::test_format_pct_negative PASSED    [ 67%]
tests\test_phase5.py::TestFormatters::test_format_pct_no_sign PASSED     [ 68%]
tests\test_phase5.py::TestFormatters::test_format_large_number_millions PASSED [ 68%]
tests\test_phase5.py::TestFormatters::test_format_large_number_billions PASSED [ 68%]
tests\test_phase5.py::TestFormatters::test_format_large_number_small PASSED [ 68%]
tests\test_phase5.py::TestFormatters::test_format_large_number_none PASSED [ 69%]
tests\test_phase5.py::TestFormatters::test_format_ticker PASSED          [ 69%]
tests\test_phase5.py::TestFormatters::test_format_timestamp_relative PASSED [ 69%]
tests\test_phase5.py::TestFormatters::test_format_timestamp_absolute PASSED [ 69%]
tests\test_phase5.py::TestValidators::test_validate_ticker_valid PASSED  [ 70%]
tests\test_phase5.py::TestValidators::test_validate_ticker_invalid PASSED [ 70%]
tests\test_phase5.py::TestValidators::test_validate_ticker_empty PASSED  [ 70%]
tests\test_phase5.py::TestValidators::test_validate_date_range_defaults PASSED [ 70%]
tests\test_phase5.py::TestValidators::test_validate_date_range_custom PASSED [ 71%]
tests\test_phase5.py::TestValidators::test_validate_date_range_reversed PASSED [ 71%]
tests\test_phase5.py::TestValidators::test_validate_date_range_too_long PASSED [ 71%]
tests\test_phase5.py::TestValidators::test_validate_pagination_defaults PASSED [ 71%]
tests\test_phase5.py::TestValidators::test_validate_pagination_clamp PASSED [ 72%]
tests\test_phase5.py::TestRateLimiter::test_in_memory_bucket_allows PASSED [ 72%]
tests\test_phase5.py::TestRateLimiter::test_in_memory_bucket_exhausts PASSED [ 72%]
tests\test_phase5.py::TestRateLimiter::test_rate_limit_middleware_import PASSED [ 72%]
tests\test_phase5.py::TestRateLimiter::test_rate_limit_headers PASSED    [ 72%]
tests\test_phase5.py::TestRequestLogger::test_request_id_header PASSED   [ 73%]
tests\test_phase5.py::TestRequestLogger::test_import PASSED              [ 73%]
tests\test_phase5.py::TestNotifications::test_alert_type_enum PASSED     [ 73%]
tests\test_phase5.py::TestNotifications::test_discord_notifier_unconfigured PASSED [ 73%]
tests\test_phase5.py::TestNotifications::test_telegram_notifier_unconfigured PASSED [ 74%]
tests\test_phase5.py::TestNotifications::test_dispatcher_creation PASSED [ 74%]
tests\test_phase5.py::TestNotifications::test_dispatcher_send_no_channels PASSED [ 74%]
tests\test_phase5.py::TestRAGChunking::test_chunk_short_text PASSED      [ 74%]
tests\test_phase5.py::TestRAGChunking::test_chunk_long_text PASSED       [ 75%]
tests\test_phase5.py::TestRAGChunking::test_chunk_empty_text PASSED      [ 75%]
tests\test_phase5.py::TestRAGChunking::test_chunk_overlap PASSED         [ 75%]
tests\test_phase5.py::TestRAGPipeline::test_pipeline_import PASSED       [ 75%]
tests\test_phase5.py::TestRAGPipeline::test_pipeline_unavailable_gracefully PASSED [ 76%]
tests\test_phase5.py::TestRAGPipeline::test_collection_constants PASSED  [ 76%]
tests\test_phase5.py::TestCeleryApp::test_celery_app_creation PASSED     [ 76%]
tests\test_phase5.py::TestCeleryApp::test_celery_config PASSED           [ 76%]
tests\test_phase5.py::TestCeleryApp::test_beat_schedule_exists PASSED    [ 77%]
tests\test_phase5.py::TestMarketTasks::test_tasks_registered PASSED      [ 77%]
tests\test_phase5.py::TestMarketTasks::test_task_names PASSED            [ 77%]
tests\test_phase5.py::TestModuleExports::test_utils_exports PASSED       [ 77%]
tests\test_phase5.py::TestModuleExports::test_middleware_exports PASSED  [ 77%]
tests\test_phase5.py::TestModuleExports::test_notifications_exports PASSED [ 78%]
tests\test_phase5.py::TestModuleExports::test_rag_exports PASSED         [ 78%]
tests\test_phase5.py::TestModuleExports::test_tasks_exports PASSED       [ 78%]
tests\test_phase6.py::TestQuestDBClient::test_import PASSED              [ 78%]
tests\test_phase6.py::TestQuestDBClient::test_client_offline_graceful PASSED [ 79%]
tests\test_phase6.py::TestQuestDBClient::test_ensure_tables_offline PASSED [ 79%]
tests\test_phase6.py::TestQuestDBClient::test_module_exports PASSED      [ 79%]
tests\test_phase6.py::TestWebSocket::test_imports PASSED                 [ 79%]
tests\test_phase6.py::TestWebSocket::test_connection_manager_init PASSED [ 80%]
tests\test_phase6.py::TestWebSocket::test_connection_manager_tracks_tickers PASSED [ 80%]
tests\test_phase6.py::TestWebSocket::test_websocket_routes_registered PASSED [ 80%]
tests\test_phase6.py::TestWatchlistInMemory::test_add_and_get_watchlist PASSED [ 80%]
tests\test_phase6.py::TestWatchlistInMemory::test_watchlist_no_duplicates PASSED [ 81%]
tests\test_phase6.py::TestWatchlistInMemory::test_remove_from_watchlist PASSED [ 81%]
tests\test_phase6.py::TestWatchlistInMemory::test_remove_nonexistent PASSED [ 81%]
tests\test_phase6.py::TestWatchlistInMemory::test_alerts_crud PASSED     [ 81%]
tests\test_phase6.py::TestWatchlistInMemory::test_remove_nonexistent_alert PASSED [ 82%]
tests\test_phase6.py::TestWatchlistRoutes::test_get_empty_watchlist PASSED [ 82%]
tests\test_phase6.py::TestWatchlistRoutes::test_add_to_watchlist_api PASSED [ 82%]
tests\test_phase6.py::TestWatchlistRoutes::test_add_invalid_ticker PASSED [ 82%]
tests\test_phase6.py::TestWatchlistRoutes::test_create_alert_api PASSED  [ 83%]
tests\test_phase6.py::TestWatchlistRoutes::test_get_alerts_api PASSED    [ 83%]
tests\test_phase6.py::TestWatchlistRoutes::test_create_alert_invalid_direction PASSED [ 83%]
tests\test_phase6.py::TestDeployment::test_dockerfile_exists PASSED      [ 83%]
tests\test_phase6.py::TestDeployment::test_docker_compose_has_backend PASSED [ 83%]
tests\test_phase6.py::TestRouteRegistration::test_all_routers_mounted PASSED [ 84%]
tests\test_phase7.py::TestRedisCache::test_imports PASSED                [ 84%]
tests\test_phase7.py::TestRedisCache::test_cache_offline_graceful PASSED [ 84%]
tests\test_phase7.py::TestRedisCache::test_cache_stats_offline PASSED    [ 84%]
tests\test_phase7.py::TestRedisCache::test_ttl_constants PASSED          [ 85%]
tests\test_phase7.py::TestCacheKeyGeneration::test_make_cache_key PASSED [ 85%]
tests\test_phase7.py::TestCacheKeyGeneration::test_key_deterministic PASSED [ 85%]
tests\test_phase7.py::TestCacheKeyGeneration::test_long_key_hashed PASSED [ 85%]
tests\test_phase7.py::TestCachedDecorator::test_decorator_pass_through_offline PASSED [ 86%]
tests\test_phase7.py::TestAuthMiddleware::test_health_always_accessible PASSED [ 86%]
tests\test_phase7.py::TestAuthMiddleware::test_dev_mode_bypasses_auth PASSED [ 86%]
tests\test_phase7.py::TestAuthMiddleware::test_production_rejects_missing_key PASSED [ 86%]
tests\test_phase7.py::TestAuthMiddleware::test_extract_bearer_token PASSED [ 87%]
tests\test_phase7.py::TestAuthMiddleware::test_extract_api_key_header PASSED [ 87%]
tests\test_phase7.py::TestAuthMiddleware::test_no_key_extracted PASSED   [ 87%]
tests\test_phase7.py::TestAuthMiddleware::test_middleware_module_exports PASSED [ 87%]
tests\test_phase7.py::TestDataEngineCaching::test_cached_decorators_applied PASSED [ 88%]
tests\test_phase7.py::TestDataEngineCaching::test_data_engine_imports_cache PASSED [ 88%]
tests\test_phase7.py::TestStartupHooks::test_lifespan_function_exists PASSED [ 88%]
tests\test_phase7.py::TestStartupHooks::test_app_creates_with_all_middleware PASSED [ 88%]
tests\test_phase7.py::TestStartupHooks::test_app_version PASSED          [ 88%]
tests\test_phase8.py::TestMarketRoutesModule::test_module_imports PASSED [ 89%]
tests\test_phase8.py::TestMarketRoutesModule::test_engine_initialized PASSED [ 89%]
tests\test_phase8.py::TestMarketRoutesModule::test_router_has_routes PASSED [ 89%]
tests\test_phase8.py::TestRouteRegistration::test_sentiment_route PASSED [ 89%]
tests\test_phase8.py::TestRouteRegistration::test_filings_route PASSED   [ 90%]
tests\test_phase8.py::TestRouteRegistration::test_options_flow_route PASSED [ 90%]
tests\test_phase8.py::TestRouteRegistration::test_unusual_activity_route PASSED [ 90%]
tests\test_phase8.py::TestRouteRegistration::test_sweeps_route PASSED    [ 90%]
tests\test_phase8.py::TestRouteRegistration::test_market_clock_route PASSED [ 91%]
tests\test_phase8.py::TestRouteRegistration::test_trending_route PASSED  [ 91%]
tests\test_phase8.py::TestRouteRegistration::test_wsb_mentions_route PASSED [ 91%]
tests\test_phase8.py::TestRouteRegistration::test_tv_technical_route PASSED [ 91%]
tests\test_phase8.py::TestRouteRegistration::test_tv_screener_route PASSED [ 92%]
tests\test_phase8.py::TestRouteRegistration::test_tv_movers_route PASSED [ 92%]
tests\test_phase8.py::TestRouteRegistration::test_tv_snapshot_route PASSED [ 92%]
tests\test_phase8.py::TestEndpointSmoke::test_sentiment_responds PASSED  [ 92%]
tests\test_phase8.py::TestEndpointSmoke::test_filings_responds PASSED    [ 93%]
tests\test_phase8.py::TestEndpointSmoke::test_options_flow_responds PASSED [ 93%]
tests\test_phase8.py::TestEndpointSmoke::test_market_clock_responds PASSED [ 93%]
tests\test_phase8.py::TestEndpointSmoke::test_trending_responds PASSED   [ 93%]
tests\test_phase8.py::TestEndpointSmoke::test_tv_movers_responds PASSED  [ 94%]
tests\test_phase8.py::TestEndpointSmoke::test_tv_technical_responds PASSED [ 94%]
tests\test_phase8.py::TestAPICompleteness::test_total_route_count PASSED [ 94%]
tests\test_phase8.py::TestAPICompleteness::test_market_router_tags PASSED [ 94%]
tests\test_phase9.py::TestRouteDataEngineWiring::test_routes_import_data_engine PASSED [ 94%]
tests\test_phase9.py::TestRouteDataEngineWiring::test_routes_no_inline_client_instantiation PASSED [ 95%]
tests\test_phase9.py::TestRouteDataEngineWiring::test_routes_engine_instance_exists PASSED [ 95%]
tests\test_phase9.py::TestErrorHandlersModule::test_imports PASSED       [ 95%]
tests\test_phase9.py::TestErrorHandlersModule::test_handlers_registered PASSED [ 95%]
tests\test_phase9.py::TestErrorHandlerBehavior::test_404_returns_structured_json PASSED [ 96%]
tests\test_phase9.py::TestErrorHandlerBehavior::test_422_returns_field_errors PASSED [ 96%]
tests\test_phase9.py::TestErrorHandlerBehavior::test_error_includes_request_id PASSED [ 96%]
tests\test_phase9.py::TestExistingRoutesIntact::test_health_still_works PASSED [ 96%]
tests\test_phase9.py::TestExistingRoutesIntact::test_stock_route_accessible PASSED [ 97%]
tests\test_phase9.py::TestExistingRoutesIntact::test_options_route_accessible PASSED [ 97%]
tests\test_phase9.py::TestExistingRoutesIntact::test_fear_greed_route_accessible PASSED [ 97%]
tests\test_watchlist_routes.py::TestWatchlistRoutes::test_get_empty_watchlist PASSED [ 97%]
tests\test_watchlist_routes.py::TestWatchlistRoutes::test_add_ticker PASSED [ 98%]
tests\test_watchlist_routes.py::TestWatchlistRoutes::test_get_after_add PASSED [ 98%]
tests\test_watchlist_routes.py::TestWatchlistRoutes::test_add_duplicate_returns_409 PASSED [ 98%]
tests\test_watchlist_routes.py::TestWatchlistRoutes::test_remove_ticker PASSED [ 98%]
tests\test_watchlist_routes.py::TestWatchlistRoutes::test_remove_nonexistent_returns_404 PASSED [ 99%]
tests\test_watchlist_routes.py::TestAlertRoutes::test_create_alert PASSED [ 99%]
tests\test_watchlist_routes.py::TestAlertRoutes::test_get_alerts PASSED  [ 99%]
tests\test_watchlist_routes.py::TestAlertRoutes::test_delete_alert PASSED [ 99%]
tests\test_watchlist_routes.py::TestAlertRoutes::test_create_alert_invalid_direction PASSED [100%]

============================== warnings summary ===============================
test_phase1.py: 8 warnings
test_phase13.py: 2 warnings
test_phase14.py: 4 warnings
test_phase15.py: 2 warnings
test_phase2.py: 1 warning
test_phase5.py: 2 warnings
test_phase7.py: 1 warning
test_phase8.py: 1 warning
test_phase9.py: 3 warnings
  C:\Users\Confidential\AppData\Roaming\Python\Python314\site-packages\pydantic\main.py:250: DeprecationWarning:
  
  datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

test_phase1.py::TestPydanticModels::test_ohlcv_creation
  C:\Users\Confidential\Documents\screener\tvscreener\backend\tests\test_phase1.py:76: DeprecationWarning:
  
  datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

test_phase2.py::TestMemorySystem::test_semantic_memory
test_phase2.py::TestMemorySystem::test_semantic_search
test_phase2.py::TestMemorySystem::test_semantic_search
test_phase2.py::TestMemorySystem::test_semantic_forget
test_phase2.py::TestMemorySystem::test_semantic_user_profile
test_phase2.py::TestMemorySystem::test_memory_manager
  C:\Users\Confidential\Documents\screener\tvscreener\backend\app\memory\manager.py:47: DeprecationWarning:
  
  datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

test_phase2.py::TestObservability::test_traced_decorator
  C:\Users\Confidential\Documents\screener\tvscreener\backend\app\observability.py:146: DeprecationWarning:
  
  'asyncio.iscoroutinefunction' is deprecated and slated for removal in Python 3.16; use inspect.iscoroutinefunction() instead

test_phase2.py::TestSupervisor::test_graph_builds_without_credentials
  C:\Users\Confidential\AppData\Roaming\Python\Python314\site-packages\google\genai\types.py:43: DeprecationWarning:
  
  '_UnionGenericAlias' is deprecated and slated for removal in Python 3.17

test_phase8.py::TestEndpointSmoke::test_sentiment_responds
  C:\Users\Confidential\Documents\screener\tvscreener\backend\app\engines\data_engine.py:171: DeprecationWarning:
  
  datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
========== 407 passed, 11 skipped, 34 warnings in 862.87s (0:14:22) ===========
